<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14.3. Models and Data &mdash; Textbook Template 2022 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="14.4. Model-Binding" href="model-binding.html" />
    <link rel="prev" title="14.2. Create a Model" href="model-class.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: purple" >
            <a href="../../index.html" class="icon icon-home"> Textbook Template
            <img src="../../_static/lc-ed-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction-and-setup/index.html">1. Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-types/index.html">2. Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../control-flow-and-collections/index.html">3. Control Flow and Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/index.html">4. Classes in C#, Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes-part2/index.html">5. Classes and Objects, Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-testing/index.html">6. Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inheritance/index.html">7. Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces-and-polymorphism/index.html">8. Interfaces and Polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-intro/index.html">9. Introduction to ASP.NET</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-controllers-and-routes/index.html">10. Controllers and Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions/index.html">11. Rules to the Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vstools/index.html">12. Tools in Visual Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../razor-views/index.html">13. Razor Views</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">14. Models and Model Binding</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model-intro.html">14.1. Models in MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-class.html">14.2. Create a Model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">14.3. Models and Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-a-unique-id-video">14.3.1. Add a Unique Id - Video</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-unique-id-text">14.3.2. Add a Unique Id - Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-data-layer-video">14.3.3. Create a Data Layer - Video</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-data-layer-text">14.3.4. Create a Data Layer - Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-an-event-video">14.3.5. Delete an Event - Video</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-an-event-text">14.3.6. Delete an Event - Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-your-understanding">14.3.7. Check Your Understanding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="model-binding.html">14.4. Model-Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="exercises.html">14.5. Exercises: Edit Model Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="studio.html">14.6. Studio: Spa User Signup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-model-validation/index.html">15. ViewModels and Model Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enums/index.html">16. Enumeration Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm-intro/index.html">17. Introduction to Object-Relational Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm-relationships/index.html">18. Relationships in Object-Relational Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth/index.html">19. Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-apis/index.html">20. Introduction to Web APIs &amp; REST</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/sql-install.html">Installing SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/vs-troubleshooting.html">Visual Studio Operational Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/postman-install.html">Installing Postman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/exercise-solutions/index.html">Exercise Solutions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: purple" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Textbook Template</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">14. </span>Models and Model Binding</a> &raquo;</li>
      <li><span class="section-number">14.3. </span>Models and Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/chapters/aspdotnet-model-classes/data-layer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="models-and-data">
<span id="data-layer"></span><h1><span class="section-number">14.3. </span>Models and Data<a class="headerlink" href="#models-and-data" title="Permalink to this headline"></a></h1>
<p>To effectively work with data, we need to add another element to our MVC application. Say for example,
we want to remove an event from our list. If two events both have the same name, we can’t yet identify which
of the events to delete.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code>, we add a unique identifier field to <code class="docutils literal notranslate"><span class="pre">Events</span></code> to better handle and track distinct
<code class="docutils literal notranslate"><span class="pre">Event</span></code> instances. Next, we’ll also create another model class called <code class="docutils literal notranslate"><span class="pre">EventData</span></code>. This allows us
to encapsulate data storage and prepare ourselves for decoupling the <code class="docutils literal notranslate"><span class="pre">Event</span></code> model from the controller.</p>
<div class="section" id="add-a-unique-id-video">
<h2><span class="section-number">14.3.1. </span>Add a Unique Id - Video<a class="headerlink" href="#add-a-unique-id-video" title="Permalink to this headline"></a></h2>

<div style="text-align:center;"><iframe width="800" height="450" src="https://www.youtube.com/embed/thyNHEyNluQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
<p></p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>The starter code for this video is found at the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/add-property" target="_blank">add-property branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
of <code class="docutils literal notranslate"><span class="pre">CodingEventsDemo</span></code>. The final code presented in this
video is found on the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/add-id" target="_blank">add-id branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.
As always, code along to the videos on your own <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code> project.</p>
</div>
</div>
<div class="section" id="add-a-unique-id-text">
<span id="index-0"></span><h2><span class="section-number">14.3.2. </span>Add a Unique Id - Text<a class="headerlink" href="#add-a-unique-id-text" title="Permalink to this headline"></a></h2>
<p>Identifying data by a user-defined string called <code class="docutils literal notranslate"><span class="pre">name</span></code> is not a sustainable or scalable method
of handling data in most situations. Consider the address book example. How can
we distinguish between two contact entries with the same name field? It is a frequent
practice to add a <strong>unique identifier</strong> field (sometimes called, or even labelled, <strong>uid</strong>) to a class
responsible for modelling data. This ensures that our address book can contain two separate entries for
our contacts who have the same name as one another.</p>
<p>To accomplish the same data clarity with events, we’ll add a few things to the event model class:</p>
<ol class="arabic simple">
<li><p>A readonly <code class="docutils literal notranslate"><span class="pre">id</span></code> field.</p></li>
<li><p>A static counter variable, <code class="docutils literal notranslate"><span class="pre">nextId</span></code>.</p></li>
<li><p>Additional constructor code that:</p>
<ol class="loweralpha simple">
<li><p>Sets <code class="docutils literal notranslate"><span class="pre">id</span></code> to the <code class="docutils literal notranslate"><span class="pre">nextId</span></code> value.</p></li>
<li><p>Increments <code class="docutils literal notranslate"><span class="pre">nextId</span></code>.</p></li>
</ol>
</li>
</ol>
<p>The result in <code class="docutils literal notranslate"><span class="pre">Models/Event.cs</span></code>:</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">namespace</span><span class="w"> </span><span class="nn">CodingEventsDemo.Models</span><span class="w"></span>
<span class="linenos"> 2</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">   </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Event</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Description</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nextId</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="nf">Event</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">description</span><span class="p">)</span><span class="w"></span>
<span class="linenos">12</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">13</span><span class="w">         </span><span class="n">Name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">         </span><span class="n">Description</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">description</span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span><span class="w">         </span><span class="n">Id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">nextId</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span><span class="w">         </span><span class="n">nextId</span><span class="p">++;</span><span class="w"></span>
<span class="linenos">17</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">ToString</span><span class="p">()</span><span class="w"></span>
<span class="linenos">20</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">21</span><span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">Name</span><span class="p">;</span><span class="w"></span>
<span class="linenos">22</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">23</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">24</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition-note admonition" id="index-1">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>Here’s a closer look at what’s going on in line 8.</p>
<p><code class="docutils literal notranslate"><span class="pre">Id</span></code> is created as a <strong>get-only auto-implemented property</strong>. You’ve seen this
syntax a few times before. The backing field, <code class="docutils literal notranslate"><span class="pre">id</span></code> is readonly because no setter
method has been written for the field. The only place <code class="docutils literal notranslate"><span class="pre">id</span></code>’s value
may be assigned is in a constructor (as it is on line 15).</p>
</div>
<p>With these additions, every time a new event object is created it is assigned a unique integer to its <code class="docutils literal notranslate"><span class="pre">id</span></code> field.</p>
</div>
<div class="section" id="create-a-data-layer-video">
<h2><span class="section-number">14.3.3. </span>Create a Data Layer - Video<a class="headerlink" href="#create-a-data-layer-video" title="Permalink to this headline"></a></h2>

<div style="text-align:center;"><iframe width="800" height="450" src="https://www.youtube.com/embed/w4Y5ULttveI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
<p></p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>The starter code for this video is found at the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/add-id" target="_blank">add-id branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
of <code class="docutils literal notranslate"><span class="pre">CodingEventsDemo</span></code>. The final code presented in this
video is found on the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/create-data-layer" target="_blank">create-data-layer branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.
As always, code along to the videos on your own <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code> project.</p>
</div>
</div>
<div class="section" id="create-a-data-layer-text">
<h2><span class="section-number">14.3.4. </span>Create a Data Layer - Text<a class="headerlink" href="#create-a-data-layer-text" title="Permalink to this headline"></a></h2>
<p>Now that we’ve begun building a model, it’s a good time to remind ourselves that models are not designed to be
data storage containers. Rather, models are meant to shape the data stored in another location. They shape data into
objects that fit into the logic of our applications. As we work our way into learning about database usage and service
calls, however, we’ll use a C# class to store some data temporarily.</p>
<span class="target" id="data-layer-dev"></span><p id="index-2">A <strong>data layer</strong> adds abstraction between models and the data we want to store. As we’ll see, a data layer allows us to pass on responsibility of exactly <em>how</em> our data is stored.</p>
<p>To get started with a data layer, create a new directory called <code class="docutils literal notranslate"><span class="pre">Data</span></code> at the root of your project, on the same level as the rest of the MVC components.
Inside of <code class="docutils literal notranslate"><span class="pre">Data/</span></code>, add a class <code class="docutils literal notranslate"><span class="pre">EventData</span></code>. Whereas <code class="docutils literal notranslate"><span class="pre">Event</span></code> is responsible for organizing
user-inputted information into a C# object, <code class="docutils literal notranslate"><span class="pre">EventData</span></code> is responsible for maintaining those objects once they
are created. <code class="docutils literal notranslate"><span class="pre">EventData</span></code> is itself a C# class that stores events. It contains several methods for managing and
maintaining the event data that simply extend System-provided collection methods.</p>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">Data/EventData.cs</span></code>:</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 6</span><span class="k">namespace</span><span class="w"> </span><span class="nn">CodingEventsDemo.Data</span><span class="w"></span>
<span class="linenos"> 7</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">   </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">EventData</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="linenos">10</span><span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">Event</span><span class="p">&gt;</span><span class="w"> </span><span class="n">Events</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">Event</span><span class="p">&gt;();</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">      </span><span class="c1">// GetAll</span>
<span class="linenos">13</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Event</span><span class="p">&gt;</span><span class="w"> </span><span class="n">GetAll</span><span class="p">()</span><span class="w"></span>
<span class="linenos">14</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">15</span><span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">Events</span><span class="p">.</span><span class="n">Values</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="w">      </span><span class="c1">// Add</span>
<span class="linenos">19</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Add</span><span class="p">(</span><span class="n">Event</span><span class="w"> </span><span class="n">newEvent</span><span class="p">)</span><span class="w"></span>
<span class="linenos">20</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">21</span><span class="w">         </span><span class="n">Events</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">newEvent</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span><span class="w"> </span><span class="n">newEvent</span><span class="p">);</span><span class="w"></span>
<span class="linenos">22</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">      </span><span class="c1">// Remove</span>
<span class="linenos">25</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Remove</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="linenos">26</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">27</span><span class="w">         </span><span class="n">Events</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">id</span><span class="p">);</span><span class="w"></span>
<span class="linenos">28</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="w">      </span><span class="c1">// GetById</span>
<span class="linenos">31</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Event</span><span class="w"> </span><span class="nf">GetById</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="linenos">32</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">33</span><span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">Events</span><span class="p">[</span><span class="n">id</span><span class="p">];</span><span class="w"></span>
<span class="linenos">34</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">35</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">36</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">EventData</span></code> now managing a collection of events, we must once again refactor <code class="docutils literal notranslate"><span class="pre">EventsController</span></code> to update the items stored in
the dictionary. In keeping with the objective to remove data handling from the controller, we’ll remove the list
of events at the top of the class. Consequently, for the <code class="docutils literal notranslate"><span class="pre">Index()</span></code> action method, we’ll now use events from
<code class="docutils literal notranslate"><span class="pre">EventData</span></code> to populate a <code class="docutils literal notranslate"><span class="pre">ViewBag.events</span></code> property:</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="linenos">17</span><span class="n">ViewBag</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EventData</span><span class="p">.</span><span class="n">GetAll</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>And back to <code class="docutils literal notranslate"><span class="pre">NewEvent</span></code>, we’ll make use of the <code class="docutils literal notranslate"><span class="pre">.add()</span></code> method from <code class="docutils literal notranslate"><span class="pre">EventData</span></code>:</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="linenos">33</span><span class="n">EventData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Event</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="delete-an-event-video">
<h2><span class="section-number">14.3.5. </span>Delete an Event - Video<a class="headerlink" href="#delete-an-event-video" title="Permalink to this headline"></a></h2>

<div style="text-align:center;"><iframe width="800" height="450" src="https://www.youtube.com/embed/dYwDTJBJIsg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
<p></p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>The starter code for this video is found at the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/create-data-layer" target="_blank">create-data-layer branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
of <code class="docutils literal notranslate"><span class="pre">CodingEventsDemo</span></code>. The final code presented in this
video is found on the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/delete-events" target="_blank">delete-events branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.
As always, code along to the videos on your own <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code> project.</p>
</div>
</div>
<div class="section" id="delete-an-event-text">
<h2><span class="section-number">14.3.6. </span>Delete an Event - Text<a class="headerlink" href="#delete-an-event-text" title="Permalink to this headline"></a></h2>
<p>Now that we’ve refined our events storage method, we are able to tackle the task of deleting an object.
To delete an event object from storage, we’ll grab the event’s id and use that
information to call the <code class="docutils literal notranslate"><span class="pre">Remove()</span></code> method of <code class="docutils literal notranslate"><span class="pre">EventData</span></code>.
Since the delete event is user-initiated, a controller will be involved to pass
the information from the user-accessible view to the data layer. So our first step
with this task is to create an action method to return a view designed to delete events.</p>
<p>Onto the end of <code class="docutils literal notranslate"><span class="pre">EventsController</span></code>, add the following method:</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="linenos">39</span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">Delete</span><span class="p">()</span><span class="w"></span>
<span class="linenos">40</span><span class="p">{</span><span class="w"></span>
<span class="linenos">41</span><span class="w">   </span><span class="n">ViewBag</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EventData</span><span class="p">.</span><span class="n">GetAll</span><span class="p">();</span><span class="w"></span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nf">View</span><span class="p">();</span><span class="w"></span>
<span class="linenos">44</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We’ll now need to create a new view for the path mapped in the method above. Add a new template,
<code class="docutils literal notranslate"><span class="pre">Views/Events/Delete.cshtml</span></code>. This view will reference event id fields in order to distinguish which items the user
will request to delete via checkbox inputs.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Delete Event<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
<span class="linenos"> 4</span>   @foreach (var evt in ViewBag.events)
<span class="linenos"> 5</span>   {
<span class="linenos"> 6</span>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
<span class="linenos"> 7</span>            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos"> 8</span>               <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>@evt.Name<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="linenos"> 9</span>               <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;eventIds&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;@evt.Id&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span><span class="p">&gt;</span>
<span class="linenos">10</span>            <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos">11</span>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos">12</span>   }
<span class="linenos">13</span>
<span class="linenos">14</span>   <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Delete Selected Events&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-danger&quot;</span><span class="p">&gt;</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>We also need a <code class="docutils literal notranslate"><span class="pre">POST</span></code> handler to take care of what to do when the delete event information
is submitted by the user. We’ll have this post handler redirect the user back to the events home
page once they have selected which event, or events, to remove from storage.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">EventsController</span></code>, add another controller method:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="linenos">47</span><span class="na">[HttpPost]</span><span class="w"></span>
<span class="linenos">48</span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">Delete</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">eventIds</span><span class="p">)</span><span class="w"></span>
<span class="linenos">49</span><span class="p">{</span><span class="w"></span>
<span class="linenos">50</span><span class="w">   </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">eventId</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">eventIds</span><span class="p">)</span><span class="w"></span>
<span class="linenos">51</span><span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="linenos">52</span><span class="w">         </span><span class="n">EventData</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">eventId</span><span class="p">);</span><span class="w"></span>
<span class="linenos">53</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nf">Redirect</span><span class="p">(</span><span class="s">&quot;/Events&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">56</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="check-your-understanding">
<h2><span class="section-number">14.3.7. </span>Check Your Understanding<a class="headerlink" href="#check-your-understanding" title="Permalink to this headline"></a></h2>
<div class="admonition-question admonition">
<p class="admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>In <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code>, which method can we call to list every event object?</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Events.Get()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EventData.GetEvery()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Event.GetAll()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EventData.GetAll()</span></code></p></li>
</ol>
</div>
<div class="admonition-question admonition">
<p class="admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>In <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code>, breaking up the event storage from the <code class="docutils literal notranslate"><span class="pre">Event</span></code> model is an example of which
object-oriented concept?</p>
<ol class="arabic simple">
<li><p>Inheritance</p></li>
<li><p>Polymorphism</p></li>
<li><p>Encapsulation</p></li>
<li><p>MVC design</p></li>
</ol>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="model-class.html" class="btn btn-neutral float-left" title="14.2. Create a Model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="model-binding.html" class="btn btn-neutral float-right" title="14.4. Model-Binding" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, LaunchCode.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>