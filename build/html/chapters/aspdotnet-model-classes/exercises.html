<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14.5. Exercises: Edit Model Classes &mdash; Textbook Template 2022 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="14.6. Studio: Spa User Signup" href="studio.html" />
    <link rel="prev" title="14.4. Model-Binding" href="model-binding.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: purple" >
            <a href="../../index.html" class="icon icon-home"> Textbook Template
            <img src="../../_static/lc-ed-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction-and-setup/index.html">1. Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-types/index.html">2. Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../control-flow-and-collections/index.html">3. Control Flow and Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/index.html">4. Classes in C#, Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes-part2/index.html">5. Classes and Objects, Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-testing/index.html">6. Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inheritance/index.html">7. Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces-and-polymorphism/index.html">8. Interfaces and Polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-intro/index.html">9. Introduction to ASP.NET</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-controllers-and-routes/index.html">10. Controllers and Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions/index.html">11. Rules to the Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vstools/index.html">12. Tools in Visual Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../razor-views/index.html">13. Razor Views</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">14. Models and Model Binding</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model-intro.html">14.1. Models in MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-class.html">14.2. Create a Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-layer.html">14.3. Models and Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-binding.html">14.4. Model-Binding</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">14.5. Exercises: Edit Model Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="studio.html">14.6. Studio: Spa User Signup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-model-validation/index.html">15. ViewModels and Model Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enums/index.html">16. Enumeration Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm-intro/index.html">17. Introduction to Object-Relational Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm-relationships/index.html">18. Relationships in Object-Relational Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth/index.html">19. Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-apis/index.html">20. Introduction to Web APIs &amp; REST</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/sql-install.html">Installing SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/vs-troubleshooting.html">Visual Studio Operational Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/postman-install.html">Installing Postman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/exercise-solutions/index.html">Exercise Solutions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: purple" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Textbook Template</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">14. </span>Models and Model Binding</a> &raquo;</li>
      <li><span class="section-number">14.5. </span>Exercises: Edit Model Classes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/chapters/aspdotnet-model-classes/exercises.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="exercises-edit-model-classes">
<span id="model-exercises"></span><h1><span class="section-number">14.5. </span>Exercises: Edit Model Classes<a class="headerlink" href="#exercises-edit-model-classes" title="Permalink to this headline"></a></h1>
<p>Add functionality to edit event objects in your <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code> application.
These exercises assume that you have added all of the code from this section of the book and your
application resembles the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/model-binding" target="_blank">model-binding branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<p>The edit form will resemble the form used to create an event.</p>
<div class="admonition-tip admonition">
<p class="admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>As you work through these steps, test your code along the way!
With each change you apply to your code, ask yourself what you expect to see when the application
is run. You may not find that all of the steps result in observable changes, though.
Use Visual Studio’s debugging tools and read your error messages if you run into issues after applying any of
the changes.</p>
</div>
<ol class="arabic">
<li><p>Create the two action methods listed below in <code class="docutils literal notranslate"><span class="pre">EventsController</span></code>. We’ll add code
to these in a moment, so just put the outline in place for
now.</p>
<ol class="arabic">
<li><p>Create an action method to display an edit form with this signature:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">Edit</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">eventId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">2</span><span class="w">   </span><span class="c1">// controller code will go here</span>
<span class="linenos">3</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Create an action method to process the form with this signature:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="na">[HttpPost]</span><span class="w"></span>
<span class="linenos">2</span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">SubmitEditEventForm</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">eventId</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">description</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">3</span><span class="w">   </span><span class="c1">// controller code will go here</span>
<span class="linenos">4</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Add the necessary annotations to the <code class="docutils literal notranslate"><span class="pre">SubmitEditEventForm()</span></code> method for it to live at the path <code class="docutils literal notranslate"><span class="pre">/Events/Edit</span></code>.</p>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-2"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>You’ll need to configure the route for <code class="docutils literal notranslate"><span class="pre">Edit()</span></code> to include the path variable <code class="docutils literal notranslate"><span class="pre">eventId</span></code>,
so that paths like <code class="docutils literal notranslate"><span class="pre">/Events/Edit/3</span></code> will work.</p>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-3"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>Create an <code class="docutils literal notranslate"><span class="pre">Edit.cshtml</span></code> view in <code class="docutils literal notranslate"><span class="pre">Views/Events</span></code>.</p></li>
<li><p>Copy the code from <code class="docutils literal notranslate"><span class="pre">Add.cshtml</span></code> into <code class="docutils literal notranslate"><span class="pre">Edit.cshtml</span></code>.</p>
<ol class="arabic simple">
<li><p>You’ll want to update the text of the submit button and the heading to reflect the edit functionality.</p></li>
</ol>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-5"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>Back in <code class="docutils literal notranslate"><span class="pre">EventsController</span></code>, round out the <code class="docutils literal notranslate"><span class="pre">Edit()</span></code> method.</p>
<ol class="arabic simple">
<li><p>Use an <code class="docutils literal notranslate"><span class="pre">EventData</span></code> method to find the event object with the given <code class="docutils literal notranslate"><span class="pre">eventId</span></code>.</p></li>
<li><p>Put the event object in <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code>.</p></li>
<li><p>Return the appropriate view.</p></li>
</ol>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-6"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>Within the form fields in <code class="docutils literal notranslate"><span class="pre">Edit.cshtml</span></code>,</p>
<ol class="arabic">
<li><p>Get the name and description from the event that was passed in via <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> and
set them as the values of the form fields.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">action=&quot;/events/edit&quot;</span></code> to the <code class="docutils literal notranslate"><span class="pre">form</span></code> tag.</p>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-7"><span class="std std-ref">Check your solution</span></a></p>
</li>
</ol>
</li>
<li><p>Add another input to hold the id of the event being edited. This
should be hidden from the user:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;@ViewBag.eventToEdit.Id&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;eventId&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>You may not have named your <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> property <code class="docutils literal notranslate"><span class="pre">eventToEdit</span></code>.
Make sure you are using the name you gave your property!</p>
</div>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-8"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>Back in the <code class="docutils literal notranslate"><span class="pre">Edit()</span></code> action method, add a title to <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> that reads <code class="docutils literal notranslate"><span class="pre">“Edit</span> <span class="pre">Event</span>
<span class="pre">NAME</span> <span class="pre">(id=ID)”</span></code> where <code class="docutils literal notranslate"><span class="pre">&quot;NAME&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;ID&quot;</span></code> are replaced by the values for the
given event.</p>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-9"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">SubmitEditEventForm()</span></code>,</p>
<ol class="arabic simple">
<li><p>Query <code class="docutils literal notranslate"><span class="pre">EventData</span></code> for the event being edited with the given id parameter.</p></li>
<li><p>Update the name and description of the event.</p></li>
<li><p>Redirect the user to <code class="docutils literal notranslate"><span class="pre">/Events</span></code> (the event listing page).</p></li>
</ol>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-10"><span class="std std-ref">Check your solution</span></a></p>
</li>
<li><p>To access event editing, the user will need an edit option in the list of event data.</p>
<ol class="arabic">
<li><p>In <code class="docutils literal notranslate"><span class="pre">Index.cshtml</span></code>, add a link to edit the
event as a column in the event table:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">asp-controller</span><span class="o">=</span><span class="s">&quot;Events&quot;</span> <span class="na">asp-action</span><span class="o">=</span><span class="s">&quot;Edit&quot;</span> <span class="na">asp-route-id</span><span class="o">=</span><span class="s">&quot;@evt.Id&quot;</span><span class="p">&gt;</span>Edit Event<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">asp-route-id</span></code> is a new tag helper for us.
Our routes normally go <code class="docutils literal notranslate"><span class="pre">/&lt;controller&gt;/&lt;action&gt;</span></code>.
<code class="docutils literal notranslate"><span class="pre">asp-route-id</span></code> passes an <code class="docutils literal notranslate"><span class="pre">{id?}</span></code> parameter at the end of our route.
When the site is built, we can inspect it and see that for the first item in the table this line of HTML will look like:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/Events/Edit/1&quot;</span><span class="p">&gt;</span>Edit Event<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</pre></div>
</div>
</li>
</ol>
<p><a class="reference internal" href="../../appendices/exercise-solutions/models.html#model-ex-11"><span class="std std-ref">Check your solution</span></a></p>
</li>
</ol>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="model-binding.html" class="btn btn-neutral float-left" title="14.4. Model-Binding" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="studio.html" class="btn btn-neutral float-right" title="14.6. Studio: Spa User Signup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, LaunchCode.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>