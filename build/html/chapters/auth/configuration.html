<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>19.5. Configuring Identity &mdash; Textbook Template 2022 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="19.6. Identity and Authorization" href="authorization.html" />
    <link rel="prev" title="19.4. Registrations and Logins" href="users.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: purple" >
            <a href="../../index.html" class="icon icon-home"> Textbook Template
            <img src="../../_static/lc-ed-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction-and-setup/index.html">1. Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-types/index.html">2. Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../control-flow-and-collections/index.html">3. Control Flow and Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/index.html">4. Classes in C#, Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes-part2/index.html">5. Classes and Objects, Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-testing/index.html">6. Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inheritance/index.html">7. Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces-and-polymorphism/index.html">8. Interfaces and Polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-intro/index.html">9. Introduction to ASP.NET</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-controllers-and-routes/index.html">10. Controllers and Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions/index.html">11. Rules to the Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vstools/index.html">12. Tools in Visual Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../razor-views/index.html">13. Razor Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-model-classes/index.html">14. Models and Model Binding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-model-validation/index.html">15. ViewModels and Model Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enums/index.html">16. Enumeration Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm-intro/index.html">17. Introduction to Object-Relational Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm-relationships/index.html">18. Relationships in Object-Relational Mapping</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">19. Authentication</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">19.1. Introduction to Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="hashing-passwords.html">19.2. Hashing Passwords</a></li>
<li class="toctree-l2"><a class="reference internal" href="scaffolding.html">19.3. Getting Started with Identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html">19.4. Registrations and Logins</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">19.5. Configuring Identity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#startup-cs">19.5.1. <code class="docutils literal notranslate"><span class="pre">Startup.cs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-customizations">19.5.2. Additional Customizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html">19.6. Identity and Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="identity-management.html">19.7. Identity Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="studio.html">19.8. Studio: TechJobs Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../web-apis/index.html">20. Introduction to Web APIs &amp; REST</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/sql-install.html">Installing SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/vs-troubleshooting.html">Visual Studio Operational Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/postman-install.html">Installing Postman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/exercise-solutions/index.html">Exercise Solutions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: purple" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Textbook Template</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">19. </span>Authentication</a> &raquo;</li>
      <li><span class="section-number">19.5. </span>Configuring Identity</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/chapters/auth/configuration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="configuring-identity">
<h1><span class="section-number">19.5. </span>Configuring Identity<a class="headerlink" href="#configuring-identity" title="Permalink to this headline"></a></h1>
<p>With Identity in place, we can start to configure the settings of the library to meet our authentication requirements.
The first place to start with configuring Identity to fit the needs of the project is in <code class="docutils literal notranslate"><span class="pre">Startup.cs</span></code>.</p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>Try and code along as you read more about Identity!
This page starts off with the code in the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/identity-scaffolding" target="_blank">identity-scaffolding<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> branch in <code class="docutils literal notranslate"><span class="pre">CodingEventsDemo</span></code>.
The final code for this page is in the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/identity-config" target="_blank">identity-config<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> branch in <code class="docutils literal notranslate"><span class="pre">CodingEventsDemo</span></code>.</p>
</div>
<div class="section" id="startup-cs">
<h2><span class="section-number">19.5.1. </span><code class="docutils literal notranslate"><span class="pre">Startup.cs</span></code><a class="headerlink" href="#startup-cs" title="Permalink to this headline"></a></h2>
<div class="section" id="configureservices">
<h3><span class="section-number">19.5.1.1. </span><code class="docutils literal notranslate"><span class="pre">ConfigureServices()</span></code><a class="headerlink" href="#configureservices" title="Permalink to this headline"></a></h3>
<p>The first place that we may want to customize our settings is at the bottom of <code class="docutils literal notranslate"><span class="pre">ConfigureServices()</span></code>.
When you were testing out your application, you may have accidentally entered an invalid password.
The validation conditions for a user’s password is an example of one of the settings that can be configured here by using a method called <code class="docutils literal notranslate"><span class="pre">services.Configure&lt;IdentityOptions&gt;()</span></code>.
If we wanted to make the minimum number of characters for our password 10 as opposed to 6, we would do the following.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">services</span><span class="p">.</span><span class="n">Configure</span><span class="p">&lt;</span><span class="n">IdentityOptions</span><span class="p">&gt;(</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"></span>
<span class="linenos">2</span><span class="w">   </span><span class="n">options</span><span class="p">.</span><span class="n">Password</span><span class="p">.</span><span class="n">RequiredLength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="linenos">3</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>For a full list of the default settings for users’ passwords and how we can change those settings, check out the <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.identity.passwordoptions?view=aspnetcore-3.1" target="_blank">documentation<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">ConfigureServices()</span></code>, we can also configure cookie settings, password hashers, user validation requirements, sign in settings and more.</p>
</div>
<div class="section" id="configure">
<h3><span class="section-number">19.5.1.2. </span><code class="docutils literal notranslate"><span class="pre">Configure()</span></code><a class="headerlink" href="#configure" title="Permalink to this headline"></a></h3>
<p>Below <code class="docutils literal notranslate"><span class="pre">ConfigureServices()</span></code>, you will find <code class="docutils literal notranslate"><span class="pre">Configure()</span></code>. Inside <code class="docutils literal notranslate"><span class="pre">Configure()</span></code>, we must make sure we have the following:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">app</span><span class="p">.</span><span class="n">UseRouting</span><span class="p">();</span><span class="w"></span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">app</span><span class="p">.</span><span class="n">UseAuthentication</span><span class="p">();</span><span class="w"></span>
<span class="linenos">4</span><span class="n">app</span><span class="p">.</span><span class="n">UseAuthorization</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>While we did properly scaffold Identity onto our code base, we need to add the calls to <code class="docutils literal notranslate"><span class="pre">UseAuthentication()</span></code> and <code class="docutils literal notranslate"><span class="pre">UseAuthorization()</span></code>.
Our application uses middleware to relay requests between our application and our database.
By adding the calls to <code class="docutils literal notranslate"><span class="pre">UseAuthentication()</span></code> and <code class="docutils literal notranslate"><span class="pre">UseAuthorization()</span></code>, we are specifying that we now need authentication middleware to handle these requests.
Authentication is not just about ensuring users are signed in. It is about protecting data at every point it passes through to make the application work.</p>
</div>
</div>
<div class="section" id="additional-customizations">
<h2><span class="section-number">19.5.2. </span>Additional Customizations<a class="headerlink" href="#additional-customizations" title="Permalink to this headline"></a></h2>
<p>As you learn more about what Identity can do, you may find yourself wanting to customize it more and more to suit your needs!
Here are some examples of what you can do with it.</p>
<ol class="arabic simple">
<li><p>Customize user information</p></li>
<li><p>Customize user roles</p></li>
<li><p>Customize the UI</p></li>
<li><p>Add new settings to user passwords</p></li>
<li><p>Change the default settings around user sign-in</p></li>
</ol>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>If you want to customize user data, it is best to do so when initially scaffolding the app.
Identity has a default user class called <code class="docutils literal notranslate"><span class="pre">IdentityUser</span></code>.
<a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.identity.entityframeworkcore.identityuser?view=aspnetcore-1.1" target="_blank">IdentityUser<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> has a number of properties that are important and relevant to storing user data.
However, when you read through the requirements you may notice that you need additional properties, such as the user’s first and last name.
If you want to add custom properties, check out this <a class="reference external" href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/add-user-data?view=aspnetcore-5.0&amp;tabs=visual-studio" target="_blank">article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> from Microsoft.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="users.html" class="btn btn-neutral float-left" title="19.4. Registrations and Logins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="authorization.html" class="btn btn-neutral float-right" title="19.6. Identity and Authorization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, LaunchCode.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>