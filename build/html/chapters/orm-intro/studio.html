<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>17.5. Studio: OMG More ORM! &mdash; Textbook Template 2022 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="18. Relationships in Object-Relational Mapping" href="../orm-relationships/index.html" />
    <link rel="prev" title="17.4. Exercises: OMG the ORM!" href="exercises.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: purple" >
            <a href="../../index.html" class="icon icon-home"> Textbook Template
            <img src="../../_static/lc-ed-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction-and-setup/index.html">1. Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-types/index.html">2. Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../control-flow-and-collections/index.html">3. Control Flow and Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/index.html">4. Classes in C#, Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes-part2/index.html">5. Classes and Objects, Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-testing/index.html">6. Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inheritance/index.html">7. Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces-and-polymorphism/index.html">8. Interfaces and Polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-intro/index.html">9. Introduction to ASP.NET</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-controllers-and-routes/index.html">10. Controllers and Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions/index.html">11. Rules to the Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vstools/index.html">12. Tools in Visual Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../razor-views/index.html">13. Razor Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-model-classes/index.html">14. Models and Model Binding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aspdotnet-model-validation/index.html">15. ViewModels and Model Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enums/index.html">16. Enumeration Types</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">17. Introduction to Object-Relational Mapping</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="background.html">17.1. Object-Relational Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessingdata.html">17.2. Accessing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-stores.html">17.3. Working with Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="exercises.html">17.4. Exercises: OMG the ORM!</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">17.5. Studio: OMG More ORM!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-viewmodel">17.5.1. Adding a ViewModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-eventcategorycontroller">17.5.2. Updating <code class="docutils literal notranslate"><span class="pre">EventCategoryController</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#razor-templates">17.5.3. Razor Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-final-application">17.5.4. The Final Application</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../orm-relationships/index.html">18. Relationships in Object-Relational Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth/index.html">19. Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-apis/index.html">20. Introduction to Web APIs &amp; REST</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/sql-install.html">Installing SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/vs-troubleshooting.html">Visual Studio Operational Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/postman-install.html">Installing Postman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/exercise-solutions/index.html">Exercise Solutions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: purple" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Textbook Template</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">17. </span>Introduction to Object-Relational Mapping</a> &raquo;</li>
      <li><span class="section-number">17.5. </span>Studio: OMG More ORM!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/chapters/orm-intro/studio.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="studio-omg-more-orm">
<span id="orm1-studio"></span><h1><span class="section-number">17.5. </span>Studio: OMG More ORM!<a class="headerlink" href="#studio-omg-more-orm" title="Permalink to this headline"></a></h1>
<p>Today’s studio depends on completion of the <a class="reference internal" href="exercises.html#orm1-exercises"><span class="std std-ref">exercises</span></a>.
If you have not completed the exercises, go back and complete them before continuing with the studio.
If you want to check out one possible solution to the exercises before you get started, look at the <a class="reference external" href="https://github.com/LaunchCodeEducation/CodingEventsDemo/tree/studio16-starter" target="_blank">studio16-starter<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> branch in <code class="docutils literal notranslate"><span class="pre">CodingEventsDemo</span></code>.</p>
<div class="section" id="adding-a-viewmodel">
<h2><span class="section-number">17.5.1. </span>Adding a ViewModel<a class="headerlink" href="#adding-a-viewmodel" title="Permalink to this headline"></a></h2>
<p>With the new table set up in our database and our application displaying event categories, we need to add a ViewModel so we can add validation for new event categories.
Create a new ViewModel called <code class="docutils literal notranslate"><span class="pre">AddEventCategoryViewModel</span></code>.
Add one property to your ViewModel for the name of the event category.
Add validation attributes to the property so that it is required and that it has to be between 3 and 20 characters long.</p>
</div>
<div class="section" id="updating-eventcategorycontroller">
<h2><span class="section-number">17.5.2. </span>Updating <code class="docutils literal notranslate"><span class="pre">EventCategoryController</span></code><a class="headerlink" href="#updating-eventcategorycontroller" title="Permalink to this headline"></a></h2>
<p>We will be creating 2 new action methods in our controller:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Create()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProcessCreateEventCategoryForm()</span></code></p></li>
</ol>
<div class="section" id="create">
<h3><span class="section-number">17.5.2.1. </span><code class="docutils literal notranslate"><span class="pre">Create()</span></code><a class="headerlink" href="#create" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Create()</span></code> needs to do the following:</p>
<ol class="arabic simple">
<li><p>Responds to <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests at <code class="docutils literal notranslate"><span class="pre">EventCategory/Create</span></code> and returns a view called <code class="docutils literal notranslate"><span class="pre">Create.cshtml</span></code>.</p></li>
<li><p>Pass a new instance of <code class="docutils literal notranslate"><span class="pre">AddEventCategoryViewModel</span></code> to <code class="docutils literal notranslate"><span class="pre">View()</span></code>.</p></li>
</ol>
</div>
<div class="section" id="processcreateeventcategoryform">
<h3><span class="section-number">17.5.2.2. </span><code class="docutils literal notranslate"><span class="pre">ProcessCreateEventCategoryForm()</span></code><a class="headerlink" href="#processcreateeventcategoryform" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ProcessCreateEventCategoryForm()</span></code> needs to do the following:</p>
<ol class="arabic simple">
<li><p>Responds to <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests at the route of your choosing.</p></li>
<li><p>Use error validation and <code class="docutils literal notranslate"><span class="pre">ModelState.IsValid</span></code> appropriately. If you want to review how to use <code class="docutils literal notranslate"><span class="pre">ModelState.IsValid</span></code>, check out the section on <a class="reference internal" href="../aspdotnet-model-validation/validation-controller.html#validating-models"><span class="std std-ref">error validation</span></a>.</p></li>
<li><p>Create a new instance of <code class="docutils literal notranslate"><span class="pre">EventCategory</span></code> and add it to the database if the form input meets the validation conditions.</p></li>
<li><p>Either reload the form or add a new event category to the database and direct the user back to the <code class="docutils literal notranslate"><span class="pre">EventCategory/Index.cshtml</span></code> template.</p></li>
</ol>
</div>
</div>
<div class="section" id="razor-templates">
<h2><span class="section-number">17.5.3. </span>Razor Templates<a class="headerlink" href="#razor-templates" title="Permalink to this headline"></a></h2>
<p>To finish the studio, we need to make a new template, <code class="docutils literal notranslate"><span class="pre">EventCategory/Create.cshtml</span></code>, which will contain a form for adding new event categories.</p>
<p>We also need to add links to the pages for all of the events, all of the event categories, and the form to add a new event category to the navbar.
To do so, open up <code class="docutils literal notranslate"><span class="pre">_Layout.cshtml</span></code> and scroll down to approximately line 24 where you find the code for the link to add an event:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="linenos">24</span><span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;nav-item&quot;</span><span class="nt">&gt;</span>
<span class="linenos">25</span>   <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nav-link text-dark&quot;</span> <span class="na">asp-area=</span><span class="s">&quot;&quot;</span> <span class="na">asp-controller=</span><span class="s">&quot;Events&quot;</span> <span class="na">asp-action=</span><span class="s">&quot;Add&quot;</span><span class="nt">&gt;</span>Add<span class="nt">&lt;/a&gt;</span>
<span class="linenos">26</span><span class="nt">&lt;/li&gt;</span>
</pre></div>
</div>
<p>Using this code as a template, add links to the <code class="docutils literal notranslate"><span class="pre">Events/Index.cshtml</span></code>, <code class="docutils literal notranslate"><span class="pre">EventCategory/Create.cshtml</span></code>, and <code class="docutils literal notranslate"><span class="pre">EventCategory/Index.cshtml</span></code> views.</p>
</div>
<div class="section" id="the-final-application">
<h2><span class="section-number">17.5.4. </span>The Final Application<a class="headerlink" href="#the-final-application" title="Permalink to this headline"></a></h2>
<p>Once you are done, launch your app and head to the <code class="docutils literal notranslate"><span class="pre">/EventCategory</span></code> route!
If you added categories already, you will see any categories already stored in the database.</p>
<p>If you click on “Create Category”, you should be directed to the <code class="docutils literal notranslate"><span class="pre">/EventCategory/Create</span></code> route.
Once you hit submit, you are redirected back to <code class="docutils literal notranslate"><span class="pre">/EventCategory</span></code>, and your table now contains the newest event category!</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="exercises.html" class="btn btn-neutral float-left" title="17.4. Exercises: OMG the ORM!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../orm-relationships/index.html" class="btn btn-neutral float-right" title="18. Relationships in Object-Relational Mapping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, LaunchCode.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>